process{
    withName: SAMTOOLS_SORT{
        ext.prefix = { "$params.output_basename" }
    }
    withName: CUTADAPT {
        ext.args = { [
            (params.cutadapt_r1_adapter) ? "-a ${params.cutadapt_r1_adapter} -o TRIMMED.reads_1.fastq.gz" : '',
            (params.cutadapt_r2_adapter) ? "-A ${params.cutadapt_r2_adapter} -p TRIMMED.reads_2.fastq.gz" : '',
            (params.cutadapt_min_len) ? "--minimum-length ${params.cutadapt_min_len}" : '',
            (params.cutadapt_quality_base) ? "--quality-base ${params.cutadapt_quality_base}" : '',
            (params.cutadapt_quality_cutoff) ? "--quality-cutoff ${params.cutadapt_quality_cutoff}" : '',
        ].join(' ').trim() }
        publishDir = [
            mode: 'copy',
            path: { "${params.outdir}/cutadapt/" },
            pattern: "*cutadapt_stats.txt"
        ]
    }
}